<template>
        <template if:true={progWrap}>
        <lightning-card >                       
                <h3 slot="title" class="slds-text-heading_medium" >
                        <lightning-icon icon-name="standard:account" size="small"></lightning-icon>
                        <b>{titleLabel}</b>
                </h3>
                            
                <br/>
                <br/>
                <template if:true={progWrap.opportunityLocations}>
                <template for:each={progWrap.opportunityLocations} for:item="ol">  
                                <!-- <div class="slds-grid slds-gutters" key={ol.rawLocation.Service_Location__c}>                                        
                                <c-technical-forms-locatiaon-product opportunitylocation={ol} key={ol.rawLocation.Service_Location__c}></c-technical-forms-locatiaon-product>                              
                                </div> -->
                        <div class="slds-grid slds-gutters" key={ol.rawLocation.Service_Location__c}>                                        
                                <br/>
                                <br/>
                                <div class="slds-col slds-size_1-of-3 slds-text-heading_small">
                                        <b><c-navigation-link label={ol.rawLocation.Service_Location__r.Name} title="View Service Location"                      
                                                type="standard__recordPage" record-id={ol.rawLocation.Service_Location__c}></c-navigation-link></b>
                                        <br/>
                                        <br>{ol.rawLocation.Service_Location__r.Location__r.Name} - {ol.rawLocation.Name}</br>
                                        <br/>
                                        <table class="slds-table slds-table_cell-buffer slds-table_bordered slds-text-font_monospace" >
                                                <thead>
                                                <tr class="slds-line-height_reset">
                                                        <th class="">Product Family</th>
                                                        <th class="">Product</th>
                                                        <th class="">Total</th>
                                                </tr>
                                                </thead>
                                                <template if:true={ol.activeSolution}>                                                                
                                                        <template for:each={ol.activeSolution.productFamilies} for:item="nextFamily">                                                                        
                                                                <template if:true={nextFamily.products}>                                                                        
                                                                <template for:each={nextFamily.products} for:item="nextProduct">
                                                                        <tr key={nextProduct.ProductId} class="slds-hint-parent">
                                                                                <td>{nextFamily.Name}</td>
                                                                                <td>{nextProduct.Name}</td>
                                                                                <td>   <a class="tooltip" href="#">
                                                                                                <lightning-formatted-number value={nextProduct.total} format-style="currency" currency-code={ol.CurrencyIsoCode} currency-display-as="symbol"></lightning-formatted-number>        
                                                                                                <span class="classic">
                                                                                                <table class="slds-table slds-table_cell-buffer slds-table_bordered slds-table_col-bordered">
                                                                                                        <template if:true={nextProduct.lines}>                                                                        
                                                                                                        <template for:each={nextProduct.lines} for:item="nextLine">                                                                                                        
                                                                                                                <tr key={nextLine.rawOLI} class="slds-hint-parent">
                                                                                                                        <td class="slds-truncate">{nextLine.rawOLI.PP_Product_Pricing_Name__c}</td>
                                                                                                                        <td>{nextLine.rawOLI.Qty__c}</td>                                                                                                                        
                                                                                                                        <td><lightning-formatted-number if:true={nextLine.rawOLI.MRC_Total__c} value={nextLine.rawOLI.MRC_Total__c} format-style="currency" currency-code={ol.CurrencyIsoCode} currency-display-as="symbol"></lightning-formatted-number>        </td>
                                                                                                                </tr>   
                                                                                                        </template>
                                                                                                        </template>
                                                                                                        <template if:false={nextProduct.lines}>
                                                                                                                <p> no nextline</p>
                                                                                                        </template>                                                                        
                                                                                                </table>
                                                                                                </span>                
                                                                                        </a>        
                                                                                </td>
                                                                        </tr>
                                                                </template>
                                                                </template>
                                                                <template if:false={nextFamily.products}>
                                                                        <p key={nextFamily.Name}>no products</p>
                                                                </template>
                                
                                                        </template>
                                                </template>
                                                <template if:false={ol.activeSolution.productFamilies}>
                                                        <p>no product families</p>
                                                </template>
                                                <tr class="slds-hint-parent">
                                                        <td colspan="2" class="">Sub Total</td>
                                                        <td><lightning-formatted-number value={ol.activeSolution.rawSolution.MRC_Total__c} format-style="currency"  currency-code={ol.CurrencyIsoCode} currency-display-as="symbol"></lightning-formatted-number></td>
                                                </tr>
                                                        <tr>
                                                        <td colspan="2">Turndowns</td>
                                                        <td>(<lightning-formatted-number value={ol.rawLocation.Turndown_Total__c} format-style="currency"  currency-code={ol.CurrencyIsoCode} currency-display-as="symbol"></lightning-formatted-number>)</td>
                                                </tr>                                                        
                                                <tr>
                                                        <td colspan="2" class="">Total</td>
                                                        <td><lightning-formatted-number value={ol.totalValue} format-style="currency"  currency-code={ol.CurrencyIsoCode} currency-display-as="symbol"></lightning-formatted-number></td>
                                                </tr>
                                        </table>
                                </div>
                                <div class="slds-col slds-size_1-of-3">
                                        <div class="slds-align_absolute-center" style="height:5rem">
                                                <ul>
                                                        <li><lightning-button label="Order Summary" title="Order Summary" class="slds-m-left_x-small"></lightning-button></li>
                                                        <li></li>
                                                        <li><lightning-button label="Cost Comparison" title="Cost Comparison" class="slds-m-left_x-small"></lightning-button></li>
                                                </ul>                                                        
                                        </div>                                        
                                </div>
                                <div class="slds-col slds-size_1-of-3">
                                        <ul class="slds-list_ordered">                                                
                                                <li><a href="javascript:void(0);">Customer Profile</a></li>
                                                <li><a href="javascript:void(0);">Features Schedule</a></li>
                                                <li><a href="javascript:void(0);">Voicemail Configuration</a></li>
                                                <li><a href="javascript:void(0);">DIDâ€™s and Virtual TN's</a></li>
                                                <li><a href="javascript:void(0);">Toll Free Services</a></li>
                                                <li><a href="javascript:void(0);">Directory Listing</a></li>
                                        </ul>
                                </div>

                        </div>
                        <div class="slds-grid slds-gutters" key={ol.rawLocation.Service_Location__c}><br/><br/></div>
                </template>
                </template>
                        
        </lightning-card>
        </template>
        <template if:true={error}>
                        <c-error-panel errors={error}></c-error-panel>
        </template>
</template>